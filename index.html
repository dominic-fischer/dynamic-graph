<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3 Time-Filtered Dynamic Graph</title>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        height: 100vh;
      }
      #controls {
        padding: 10px;
        background: #d3d0d0;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      label {
        font-size: 14px;
      }
      input[type="range"] {
        flex: 1;
      }
      #dynamic-graph-container {
        background-color: rgb(36, 41, 41);
        flex: 1;
        position: relative; /* helps tooltip positioning */
      }
      /* keep only opacity here; color comes from D3 */
      #dynamic-graph-container svg line {
        stroke-opacity: 0.8;
      }
    </style>
    <script type="module" crossorigin src="/dynamic-graph/assets/index-DeN6x111.js"></script>
  </head>
  <body>
    <div id="controls">
      <label for="time-slider">Time: <span id="time-value"></span></label>
      <input
        type="range"
        id="time-slider"
        min="1520"
        max="1575"
        step="1"
        value="1520"
      />

      <label for="topn-slider">Top N: <span id="topn-value">All</span></label>
      <input
        type="range"
        id="topn-slider"
        min="0"
        max="50"
        step="5"
        value="50"
      />

      <button id="play-toggle" type="button">▶ Play</button>
      <style>
        #play-toggle { padding: 6px 10px; cursor: pointer; }

        :root {
          --controls-h: 0px;
          --sidebar-w: 340px;
        }

        /* Overlay panel */
        #sidebar {
          position: fixed;
          left: 0;
          top: var(--controls-h);          /* starts below the sliders */
          width: var(--sidebar-w);
          height: calc(100vh - var(--controls-h));

          background: rgba(15, 15, 18, 0.96);
          backdrop-filter: blur(6px);

          color: #eee;
          border-right: 1px solid rgba(255,255,255,0.12);
          overflow: auto;

          transform: translateX(-105%);
          transition: transform 240ms cubic-bezier(.2,.8,.2,1);

          z-index: 50;                     /* above SVG */
          padding: 14px 14px 20px;
          box-sizing: border-box;

          box-shadow: 6px 0 30px rgba(0,0,0,.45);
        }

        #sidebar.open {
          transform: translateX(0);
        }


        #sidebar-close {
          position: sticky;
          top: 0;
          float: right;
          margin: 0 0 8px 8px;
          padding: 6px 10px;
          cursor: pointer;
        }

        #sidebar-content h2 {
          margin: 0 0 6px;
          font-size: 18px;
        }

        #sidebar-content .meta {
          opacity: 0.85;
          font-size: 13px;
          margin-bottom: 10px;
        }

        #sidebar-content img.thumb {
          display: block;
          width: 100%;
          height: auto;
          border-radius: 8px;
          margin: 10px 0;
        }

        #sidebar-content a {
          color: #8ab4ff;
          text-decoration: none;
        }
        #sidebar-content a:hover {
          text-decoration: underline;
        }

        #sidebar-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,.35);
          opacity: 0;
          pointer-events: none;
          transition: opacity 200ms ease;
          z-index: 40;
        }

        #sidebar.open + #sidebar-backdrop {
          opacity: 1;
          pointer-events: auto;
        }
      </style>

      <label style="display:flex; align-items:center; gap:6px;">
        <input type="checkbox" id="correspondence-toggle" checked />
        Correspondence links
      </label>
    </div>

    <div id="sidebar" aria-hidden="true">
      <button id="sidebar-close" type="button" title="Close">✕</button>
      <div id="sidebar-content"></div>
    </div>
    <div id="sidebar-backdrop"></div>

    <div id="dynamic-graph-container"></div>

  </body>
</html>